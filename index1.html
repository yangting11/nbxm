<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.1/dist/leaflet.css" />
    <script src="./echarts.min.js"></script>
    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/1.10.0/jquery.min.js"></script>
    <link rel="stylesheet" href="./layuiadmin/layui/css/layui.css" media="all">
    <link href="./index1.css" rel="stylesheet"></link>
    <title>Document</title>
</head>
<body>
    <div id="mapid"></div>
    <div class="rightBox" id="rightBox">
        <div class="rightBoxAll">
            <div class="toogleBox" onclick="clickToogle()">
                <img id="toogleImg" src="./public/img/left.png" alt="向右">
            </div>
            <div class="rightBoxHeader">
                <div class="rightBoxHeaderLeft">
                    <form class="layui-form" action="">
                        <div class="layui-form-item">
                            <div class="layui-input-block">
                                <select class="rightBoxHeaderSelect" name="city" lay-verify="required">
                                    <option value=""></option>
                                    <option value="0">北京</option>
                                    <option value="1">上海</option>
                                    <option value="2">广州</option>
                                    <option value="3">深圳</option>
                                    <option value="4">杭州</option>
                                </select>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="rightBoxHeaderRight">
                    <div id="showTime"></div>
                    <div class="showDetail" onclick="showDetail()">查看详细情况</div>
                </div>
            </div>
            <div class="rightBoxBody">
                <div class="rightBoxBodyTop">
                    <form class="layui-form layui-row" action="">
                        <div class="layui-form-item">
                            <div class="layui-inline">
                                <label class="layui-form-label">短输入框</label>
                                <div class="layui-input-inline">
                                    <input type="text" name="" required lay-verify="required" placeholder="请输入" autocomplete="off" class="layui-input">
                                </div>
                                <div class="layui-form-mid layui-word-aux">信息</div>
                            </div>
                            <div class="layui-inline">
                                <label class="layui-form-label">数据信息</label>
                                <div class="layui-input-inline lineInput">
                                    <input type="text" name="" required lay-verify="required" placeholder="" autocomplete="off" class="layui-input">
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="rightBoxBodyContent">
                    <div class="rightBoxBodyContentTitle">
                        <span>
                            <img src="./public/img/大饼图.png" alt="">
                        </span>
                        数据信息1
                    </div>
                    <form class="layui-form layui-row" action="">
                        <div class="layui-form-item">
                            <div class="layui-inline">
                                <label class="layui-form-label">验证手机</label>
                                <div class="layui-input-inline">
                                    <input type="text" name="" required lay-verify="required" placeholder="请输入" autocomplete="off" class="layui-input">
                                </div>
                                <div class="layui-form-mid layui-word-aux">单位</div>
                            </div>
                            <div class="layui-inline">
                                <label class="layui-form-label">验证邮箱</label>
                                <div class="layui-input-inline lineInput">
                                    <input type="text" name="" required lay-verify="required" placeholder="请输入" autocomplete="off" class="layui-input">
                                </div>
                                <div class="layui-form-mid layui-word-aux">单位</div>
                            </div>
                        </div>
                        <div class="layui-form-item">
                            <div class="layui-inline">
                                <label class="layui-form-label">多规则验证</label>
                                <div class="layui-input-inline">
                                    <input type="text" name="" required lay-verify="required" placeholder="请输入" autocomplete="off" class="layui-input">
                                </div>
                                <div class="layui-form-mid layui-word-aux">单位</div>
                            </div>
                            <div class="layui-inline">
                                <label class="layui-form-label">验证</label>
                                <div class="layui-input-inline lineInput">
                                    <input type="text" name="" required lay-verify="required" placeholder="请输入" autocomplete="off" class="layui-input">
                                </div>
                                <div class="layui-form-mid layui-word-aux">单位</div>
                            </div>
                        </div>
                        <div class="layui-form-item">
                            <div class="layui-inline">
                                <label class="layui-form-label">多规则验证</label>
                                <div class="layui-input-inline">
                                    <input type="text" name="" required lay-verify="required" placeholder="请输入" autocomplete="off" class="layui-input">
                                </div>
                                <div class="layui-form-mid layui-word-aux">单位</div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="rightBoxBodyContent rightBoxBodyContentWith">
                    <div class="rightBoxBodyContentTitle greenBgSpan">
                        <span>
                            <img src="./public/img/大饼图.png" alt="">
                        </span>
                        数据信息1
                    </div>
                    <form class="layui-form layui-row" action="">
                        <div class="layui-form-item">
                            <div class="layui-inline">
                                <label class="layui-form-label">验证手机</label>
                                <div class="layui-input-inline">
                                    <input type="text" name="" required lay-verify="required" placeholder="请输入" autocomplete="off" class="layui-input">
                                </div>
                                <div class="layui-form-mid layui-word-aux">单位</div>
                            </div>
                            <div class="layui-inline">
                                <label class="layui-form-label"></label>
                                <div class="layui-input-inline lineInput">
                                    <input type="text" name="" required lay-verify="required" placeholder="请输入" autocomplete="off" class="layui-input">
                                </div>
                                <div class="layui-form-mid layui-word-aux">单位</div>
                            </div>
                        </div>
                        <div class="layui-form-item">
                            <div class="layui-inline">
                                <label class="layui-form-label">多规则验证</label>
                                <div class="layui-input-inline">
                                    <input type="text" name="" required lay-verify="required" placeholder="请输入" autocomplete="off" class="layui-input">
                                </div>
                                <div class="layui-form-mid layui-word-aux">单位</div>
                            </div>
                            <div class="layui-inline">
                                <label class="layui-form-label"></label>
                                <div class="layui-input-inline lineInput">
                                    <input type="text" name="" required lay-verify="required" placeholder="请输入" autocomplete="off" class="layui-input">
                                </div>
                                <div class="layui-form-mid layui-word-aux">单位</div>
                            </div>
                        </div>
                        <button type="button" class="layui-btn form-btn">默认按钮</button>
                    </form>
                </div>
                <div class="rightBoxBodyContent rightBoxBodyContentWith">
                    <div class="rightBoxBodyContentTitle yellowBgSpan">
                        <span>
                            <img src="./public/img/大饼图.png" alt="">
                        </span>
                        数据信息1
                    </div>
                    <form class="layui-form layui-row" action="">
                        <div class="layui-form-item">
                            <div class="layui-inline">
                                <label class="layui-form-label">验证手机</label>
                                <div class="layui-input-inline">
                                    <input type="text" name="" required lay-verify="required" placeholder="请输入" autocomplete="off" class="layui-input">
                                </div>
                                <div class="layui-form-mid layui-word-aux">单位</div>
                            </div>
                            <div class="layui-inline">
                                <label class="layui-form-label"></label>
                                <div class="layui-input-inline lineInput">
                                    <input type="text" name="" required lay-verify="required" placeholder="请输入" autocomplete="off" class="layui-input">
                                </div>
                                <div class="layui-form-mid layui-word-aux">单位</div>
                            </div>
                        </div>
                        <div class="layui-form-item">
                            <div class="layui-inline">
                                <label class="layui-form-label">多规则验证</label>
                                <div class="layui-input-inline">
                                    <input type="text" name="" required lay-verify="required" placeholder="请输入" autocomplete="off" class="layui-input">
                                </div>
                                <div class="layui-form-mid layui-word-aux">单位</div>
                            </div>
                            <div class="layui-inline">
                                <label class="layui-form-label"></label>
                                <div class="layui-input-inline lineInput">
                                    <input type="text" name="" required lay-verify="required" placeholder="请输入" autocomplete="off" class="layui-input">
                                </div>
                                <div class="layui-form-mid layui-word-aux">单位</div>
                            </div>
                        </div>
                        <button type="button" class="layui-btn layui-btn-warm form-btn">默认按钮</button>
                    </form>
                </div>
                <div class="desc">
                    备注：根据layui框架
                </div>
            </div>
        </div>
    </div>
    <script src="https://unpkg.com/leaflet@1.0.1/dist/leaflet.js"></script>
    <script src="./layuiadmin/layui/layui.all.js"></script>
    <script>
        var ifOpen=false;
        document.getElementById("showTime").innerHTML=transTime(new Date());
        setInterval(function(){
            document.getElementById("showTime").innerHTML=transTime(new Date());
        },1000)
        // layui.config({
        //     base: './layuiadmin/' //静态资源所在路径
        // }).extend({
        //     index: 'lib/index' //主入口模块
        // }).use(['index', 'sample']);
        var layer = layui.layer;
        var map = map;
        initMap();
        function initMap(){
            map = L.map("mapid", {
                center: [37.005646, 114.52044],
                zoom: 11,
                fullscreenControl: false,
                zoomControl: false,
                attributionControl: false
            });
            let baseLayer=L.tileLayer("http://webrd0{s}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=8&x={x}&y={y}&z={z}",{
                subdomains: "1234"
            });
            map.addLayer(baseLayer);
            var marker = L.marker([37, 114.45]).bindTooltip("<div><div>数据数据</div><div>#01AAED</div></div>",{permament:true,opacity:1,direction:'auto',offset:[0,10],className:'leaflet-label'}).openTooltip().addTo(map);
            marker.on('click',e=>{
                var popup = L.popup().setLatLng([e.latlng.lat,e.latlng.lng]).setContent(`<div class="popup" style="width:480px;height:330px">
                        <div id="chartid" style="width:500px;height:360px"></div>
                        <div class="closePopup" id="closePopup">
                            <i class="layui-icon layui-icon-close-fill" style="font-size: 30px; color: #1E9FFF;"></i>  </div>
                </div>`);
                map.openPopup(popup)  
                echart();
                $("#closePopup").on('click',function(){
                    map.closePopup();
                })
                map.flyTo([e.latlng.lat,e.latlng.lng],13)
            })     
        }
        function echart() {
            // 基于准备好的dom，初始化echarts实例
            var myChart = echarts.init(document.getElementById("chartid"));
            // 指定图表的配置项和数据
            var index = 0;
            var colorList = ['#f36c6c', '#e6cf4e', '#20d180', '#0093ff'];
            var option = {
                tooltip: {
                    trigger: 'axis',
                    axisPointer: {
                        type: 'shadow'
                    }
                },
                legend: {
                    show: false
                },
                grid: {
                    left: 100,
                    top:0,
                    bottom:30
                },
                toolbox: {
                    show: false,
                    feature: {
                        saveAsImage: {}
                    }
                },
                xAxis: {
                    type: 'value',

                    splitLine: {
                        show: false
                    },
                    axisLabel: {
                        show: false
                    },
                    axisTick: {
                        show: false
                    },
                    axisLine: {
                        show: false
                    }

                },
                yAxis: {
                    type: 'category',
                    inverse: true,
                    axisLine: {
                        show: false
                    },
                    axisTick: {
                        show: false
                    },
                    axisPointer: {
                        label: {
                            show: true,
                            margin: 30
                        }
                    },
                    data: ['杭州市', '宁波市', '温州市', '湖州市', '嘉兴市'],
                    axisLabel: {
                        interval:0,
                        margin: 100,
                        fontSize: 14,
                        align: 'left',
                        color: '#333',
                        rich: {
                            a1: {
                                color: '#fff',
                                backgroundColor: colorList[0],
                                width: 30,
                                height: 30,
                                align: 'center',
                                borderRadius: 2
                            },
                            a2: {
                                color: '#fff',
                                backgroundColor: colorList[1],
                                width: 30,
                                height: 30,
                                align: 'center',
                                borderRadius: 2
                            },
                            a3: {
                                color: '#fff',
                                backgroundColor: colorList[2],
                                width: 30,
                                height: 30,
                                align: 'center',
                                borderRadius: 2
                            },
                            b: {
                                color: '#fff',
                                backgroundColor: colorList[3],
                                width: 30,
                                height: 30,
                                align: 'center',
                                borderRadius: 2
                            }
                        },
                        formatter: function(params) {
                            if (index == 5) {
                                index = 0;
                                return
                            }
                            index=index+1;
                            if (index - 1 < 3) {
                                console.log('{a' + index + '|' + index + '}' + '  ' + params)
                                return [
                                    '{a' + index + '|' + index + '}' + '  ' + params
                                ].join('\n')
                            } else {
                                console.log('{b|' + index + '}' + '  ' + params)

                                return [
                                    '{b|' + index + '}' + '  ' + params
                                ].join('\n')
                            }
                        }
                    }
                },
                series: [{
                        z: 2,
                        name: 'value',
                        type: 'bar',
                        data: [3.66, 2.86, 1.82, 1.8, 1.53].map((item, i) => {
                            itemStyle = {
                                color: i > 3 ? colorList[3] : colorList[i]
                            }
                            return {
                                value: item,
                                itemStyle: itemStyle
                            };
                        }),
                        label: {
                            show: true,
                            position: 'right',
                            color: '#333333',
                            fontSize: 14,
                            offset: [10, 0]
                        }
                    }

                ]
            };
            myChart.setOption(option);
        }
        function transTime(time){
            let year = time.getFullYear();
            let month = formatTime(time.getMonth()+1);
            let day = formatTime(time.getDate());
            let hour = formatTime(time.getHours());
            let min = formatTime(time.getMinutes());
            let sec = formatTime(time.getSeconds());
            return year+'-'+month+'-'+day+' '+hour+':'+min+':'+sec
        }
        function formatTime(time){
            return time<10?'0'+time:time
        }
        function clickToogle(){
            if(ifOpen){
                $("#toogleImg").attr('src','./public/img/left.png')
                $("#rightBox").css('right','-710px')
            }else{
                $("#toogleImg").attr('src','./public/img/right.png');
                $("#rightBox").css('right','0px')

            }
            ifOpen=!ifOpen;
        }
        function showDetail(){
            layer.open({
                title:'初体验',
                type: 1,
                //,skin: 'layui-layer-rim'
                shadeClose: true,
                area:['1040px', '500px'],
                content: '<iframe style="border:none;outline:none;width:100%;height:450px" src="./component/tableDetail.html"></iframe>'
            });
        }
    </script>
</body>
</html>